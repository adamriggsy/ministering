{"version":3,"file":"/js/ministering.js","mappings":"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","sources":["webpack:///./resources/js/_comments.js","webpack:///./resources/js/ministering.js"],"sourcesContent":["export const commentsHelper = function () {\n    'use strict';\n\n    let data = {\n        'commentTemplate': null,\n        'commentCardTemplate': null\n    };\n\n    let css = {\n        'mainContainer': '#assignmentContainer',\n        'viewTypes': {\n            'grid': 'ajr-grid',\n            'list': 'ajr-list'\n        },\n        'modals': {\n            'comment': '#commentModal'\n        },\n        'comments': {\n            'form': '#newComment',\n            'formError': '#commentError'\n        },\n        'household': {\n            'container': '.household',\n            'comments': '.allComments',\n            'status': '.status',\n            'error': '.statusError'\n        }\n    };\n\n    let functions = {\n    \t'init' : function(createUrl) {\n    \t\t$.ajaxSetup({\n\t\t\t    headers: {\n\t\t\t        'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n\t\t\t    }\n\t\t\t});\n    \t},\n    \t'setDataAttr' : function(attr, val) {\n    \t\tdata[attr] = val;\n    \t},\n    \t'getDataAttr' : function(attr) {\n    \t\treturn data[attr];\n    \t},\n    \t'getAllData' : function() {\n    \t\treturn data;\n    \t},\n        'createComment' : function(params) {\n    \t\t$.ajax({\n                url: params.url,\n                type: 'post',\n                data: params.data,\n                success: function(response) {\n                    params.successCallback(response);\n                }\n            });\n    \t},\n    \t'buildComments' : function(template, container, comments, emptyMessage) {\n    \t\tif(typeof emptyMessage === 'undefined') {\n                emptyMessage = 'No comments yet.';\n            }\n\n            container.html('');\n\n            if(comments.length === 0) {\n                container.html('<p>' + emptyMessage + '</p>');\n            }else {\n    \t\t    $.each(comments, function(index, comment) {\n                    let author = comment.author;\n\n                    if(typeof author === 'undefined') {\n                        author = comment.authorInfo;\n                    }\n                    \n    \t\t\t\t// let authorInfo = author.name + ' - ' + _moment(comment.updated_at).format('YYYY-MM-DD LT');\n    \t\t\t\tlet newComment = template(comment.id, comment.body, author.name, _moment(comment.updated_at).format('YYYY-MM-DD LT'));\n    \t\t\t\tcontainer.prepend(newComment);\n    \t\t\t});\n            }\n    \t},\n    \t'setCommentError' : function(container, error) {\n    \t\tcontainer.html(error);\n    \t},\n    \t'resetCommentForm' : function(form) {\n    \t\tform.reset();\n    \t},\n        'showCommentsAjaxLoader' : function(container) {\n            container.find('.ajax-loader').removeClass('d-none');\n        },\n        'hideCommentsAjaxLoader' : function(container) {\n            container.find('.ajax-loader').addClass('d-none');\n        }\n    };\n\n    return {\n        data : functions.getAllData,\n        functions: functions\n    }\n}();\n","import {commentsHelper} from './_comments.js';\n\nwindow.ministeringHelper = function () {\n    'use strict';\n\n    let data = {\n    \t'households' : null,\n    \t'unassignedHouseholds': false,\n    \t'activeHousehold': null,\n    \t'ac': false,\n        'tickerTemplate': null\n    };\n\n    let css = {\n    \t'activeHousehold' : {\n    \t\t'container' : '#activeHousehold',\n    \t\t'household' : {\n    \t\t\t'container' : '#householdContainer',\n    \t\t\t'name' : '.householdName',\n    \t\t\t'husband': '.husbandName',\n    \t\t\t'wife' : '.wifeName',\n    \t\t\t'minTo' : '#assignedToVisitContainer',\n    \t\t\t'assignedReceive' : '#visitingHousehold'\n    \t\t},\n    \t\t'ministering' : {\n    \t\t\t'container' : '#ministeringInfo',\n    \t\t\t'assigned' : {\n    \t\t\t\t'container' : '#assignedToVisitContainer'\n    \t\t\t},\n    \t\t\t'visiting' : {\n    \t\t\t\t'container' : '#visitingHousehold'\n    \t\t\t}\n    \t\t},\n    \t\t'comments' : {\n    \t\t\t'container' : '#householdComments',\n    \t\t\t'allComments' : '#commentsContainer',\n    \t\t\t'view' : '#view',\n    \t\t\t'form' : '#newComment',\n    \t\t\t'formError' : '#commentError',\n    \t\t\t'nav' : {\n    \t\t\t\t'view' : '#commentNavView',\n    \t\t\t\t'create' : '#commentNavCreate'\n    \t\t\t}\n    \t\t}\n    \t},\n    \t'household' : {\n    \t\t'container' : '.household',\n    \t\t'last_name' : '.hh_lastName',\n    \t\t'husband' : '.hh_husbandName',\n    \t\t'wife' : '.hh_wifeName',\n    \t\t'minSis' : '.hh_ministeringSis',\n    \t\t'minBro' : '.hh_ministeringBro',\n    \t\t'minTo' : '.hh_ministeringTo'\n    \t},\n        'ticker' : {\n            'mainContainer': '#unassignedTicker',\n            'container' : '#unassignedTicker .ticker'\n        }\n    };\n\n    const commentTemplate = function commentTemplate(id, body, authorName, commentDate ) {\n        return `\n            <div class='houseComment' data-commentid=\"${id}\">\n                <author>${authorName} - ${commentDate}</author>\n                <p class=\"commentBody\">${body}</p>\n            </div>\n        `;\n    };\n\n    const tickerTemplate = function tickerTemplate(content) {\n        return `\n            <div class=\"ticker__item\">${content}</div>\n        `;\n    }\n\n    let functions = {\n    \t'init' : function(households) {\n    \t\t$.ajaxSetup({\n\t\t\t    headers: {\n\t\t\t        'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n\t\t\t    }\n\t\t\t});\n\n    \t\tfunctions.setDataAttr('households', households);\n            functions.setDataAttr('tickerTemplate', tickerTemplate);\n    \t\tfunctions.getUnassignedHouseholds();\n            commentsHelper.functions.init();\n            commentsHelper.functions.setDataAttr('commentTemplate', commentTemplate);\n    \t},\n    \t'setDataAttr' : function(attr, val) {\n    \t\tdata[attr] = val;\n    \t},\n    \t'getDataAttr' : function(attr) {\n    \t\treturn data[attr];\n    \t},\n    \t'getAllData' : function() {\n    \t\treturn data;\n    \t},\n    \t'workOnHousehold' : function(householdEl) {\n    \t\tlet householdData = functions.getHouseholdById(householdEl.data('householdid'));\n    \t\tfunctions.setDataAttr('activeHousehold', householdData);\n    \t\t\n    \t\tlet ah = css.activeHousehold;\n    \t\tlet $ah = $(ah.container);\n    \t\t$ah.attr('data-activeid', householdData.id);\n    \t\t$(ah.household.name, $ah).html(householdData.last_name);\n    \t\t$(ah.household.husband, $ah).html(householdData.husbandName);\n    \t\t$(ah.household.wife, $ah).html(householdData.wifeName);\n\n    \t\t$(ah.household.minTo, $ah).html('');\n    \t\t$.each(householdData.ministerTo, function(key, val) {\n    \t\t\t$(ah.household.minTo, $ah).append(\n    \t\t\t\t'<p class=\"minToHouse\" data-householdid=\"' + key + '\">' \n    \t\t\t\t+ val \n    \t\t\t\t+ '<i class=\"removeAssigned bi-x-circle small text-danger\"></i>'\n    \t\t\t\t+ '</p>'\n\t\t\t\t);\n    \t\t});\n\n    \t\t$(ah.household.assignedReceive).children().remove();\n    \t\tif(householdData.ministeringBrother !== '') {\n    \t\t\t$(ah.household.assignedReceive).append('<p>' + householdData.ministeringBrother + '</p>');\n    \t\t}\n    \t\tif(householdData.ministeringSister !== '') {\n    \t\t\t$(ah.household.assignedReceive).append('<p>' + householdData.ministeringSister + '</p>');\n    \t\t}\n\n    \t\t$(css.activeHousehold.container).removeClass('d-none');\n\n    \t\tfunctions.getHouseholdComments();\n    \t},\n    \t'setAutocomplete' : function() {\n\t\t\t$(\"#assignHouseholdContainer\").html('').append('<input type=\"text\" class=\"form-control\" id=\"assignHousehold\" placeholder=\"Start typing...\" autocomplete=\"off\">');\n\t\t\tfunctions.setDataAttr('ac', false);\n\n\n\t\t\tconst field = document.getElementById('assignHousehold');\n\t\t    let ac = new Autocomplete(field, {\n\t\t        data: ministeringHelper.functions.getDataAttr('unassignedHouseholds'),\n\t\t        maximumItems: 10,\n\t\t        treshold: 1,\n\t\t        highlightTyped: false,\n\t\t        onSelectItem: ({label, value}) => {\n\t\t            functions.assignHousehold(value);\n\t\t        }\n\t\t    });\n\n\t\t    functions.setDataAttr('ac', ac);\n\t\t\t\n\t\t\t// $(\"#assignHousehold\").val('');\n    \t},\n    \t'getHouseholdById' : function(id) {\n    \t\tlet filteredHouseholds = data.households.filter(function(household) {\n                return (household.id === id);\n            });\n            return filteredHouseholds[0];\n    \t},\n    \t'getUnassignedHouseholds' : function() {\n    \t\t$.getJSON('/api/households/unassigned', function( response ) {\n\t\t\t\tfunctions.setDataAttr('unassignedHouseholds', response);\n\t\t\t\tfunctions.setDataAttr('ac', false);\n\t\t\t\tfunctions.setAutocomplete();\n                functions.updateTicker();\n\t\t\t});\n    \t},\n    \t'assignHousehold' : function(assignedId) {\n    \t\tlet activeHousehold = functions.getDataAttr('activeHousehold');\n\n    \t\t$.ajax({\n                url: '/api/assign',\n                type: 'post',\n                data: {\n                \thouseholdId: activeHousehold.id,\n                    assignedId: assignedId\n                },\n                success: function(response) {\n                    functions.updateHouseholds(response.household);\n                    functions.updateHouseholds(response.assignedHousehold);\n\n                    $(css.activeHousehold.household.minTo).append(\n\t\t\t\t\t\t'<p class=\"minToHouse\" data-householdid=\"' + response.assignedHousehold.id + '\">' \n\t    \t\t\t\t+ response.assignedHousehold.householdName \n\t    \t\t\t\t+ '<i class=\"removeAssigned bi-x-circle small text-danger\"></i>'\n\t    \t\t\t\t+ '</p>'\n                \t);\n\n                    $(\"#assignHousehold\").val('');\n                    functions.getUnassignedHouseholds();\n                    functions.resetDataTable();\n                }\n            });\n    \t},\n    \t'updateHouseholds' : function(household) {\n    \t\tfunctions.replaceHouseholdData(household);\n\n    \t\tlet row = $(\".household[data-householdid='\" + household.id + \"']\");\n\n    \t\t$(css.household.minSis, row).html(household.ministeringSister);\n    \t\t$(css.household.minBro, row).html(household.ministeringBrother);\n\n    \t\t$(css.household.minTo, row).html('');\n    \t\t$.each(household.ministerTo, function(key, val) {\n    \t\t\t$(css.household.minTo, row).append('<p>' + val + '</p>');\n    \t\t});\n    \t},\n    \t'replaceHouseholdData' : function(hData) {\n    \t\tlet householdKey = _.findIndex(data.households, function(household) {\n                return (household.id === hData.id);\n            });\n\n            data.households[householdKey] = hData;\n    \t}, \n    \t'removeActiveVisiting' : function() {\n    \t\tlet activeHousehold = functions.getDataAttr('activeHousehold');\n\n    \t\tif($(css.activeHousehold.household.assignedReceive).children().length > 0) {\n\t    \t\t$.ajax({\n\t                url: '/api/remove-visiting',\n\t                type: 'post',\n\t                data: {\n\t                \thouseholdId: activeHousehold.id\n\t                },\n\t                success: function(response) {\n\t                    functions.updateHouseholds(response.household);\n\t                    functions.updateHouseholds(response.otherHousehold);\n\n\t                    $(css.activeHousehold.household.assignedReceive).html('');\n\n\t                    $(\"#assignHousehold\").val('');\n\t                    functions.getUnassignedHouseholds();\n\t                    functions.resetDataTable();\n\t                }\n\t            });\n\t    \t}\n    \t},\n    \t'removeAssignedMinTo' : function(clickedEl) {\n    \t\tlet assignedId = clickedEl.data('householdid');\n    \t\tlet activeHousehold = functions.getDataAttr('activeHousehold');\n\n    \t\t$.ajax({\n                url: '/api/remove-assigned',\n                type: 'post',\n                data: {\n                \thouseholdId: activeHousehold.id,\n                \tassignedId: assignedId\n                },\n                success: function(response) {\n                    functions.updateHouseholds(response.household);\n                    functions.updateHouseholds(response.otherHousehold);\n\n                    $(css.activeHousehold.household.minTo + \" .minToHouse[data-householdid='\" + assignedId + \"']\").remove();\n\n                    $(\"#assignHousehold\").val('');\n                    functions.getUnassignedHouseholds();\n                    functions.resetDataTable();\n                }\n            });\n    \t},\n    \t'resetDataTable' : function() {\n    \t\tif ( $.fn.dataTable.isDataTable('#allHouseholdsTable') ) {\n\t\t\t\t$('#allHouseholdsTable').DataTable().destroy();\n\n\t\t\t}\n\n\t\t\t$(\"#allHouseholdsTable\").DataTable({\n                paging: false,\n                \"order\": [],\n                // \"autoWidth\": false,\n                \"columns\": [\n                    {\n                        \"targets\": 0,\n                        \"orderable\": false,\n                        \"width\": '1%'\n                    },\n                    {\n                        \"targets\": 1,\n                        \"width\": '5%'\n                    },\n                    {\n                        \"targets\": 2,\n                        \"width\": '5%'\n                    },\n                    {\n                        \"targets\": 3,\n                        \"width\": '5%'\n                    },\n                    {\n                        \"targets\": 4,\n                        \"width\": '14%'\n                    },\n                    {\n                        \"targets\": 5,\n                        \"width\": '14%'\n                    },\n                    {\n                        \"targets\": 6,\n                        \"orderable\": false,\n                        \"width\": '14%'\n                    },\n                    {\n                        \"targets\": 7,\n                        \"orderable\": false,\n                        \"width\": '14%'\n                    },\n                    {\n                        \"targets\": 8,\n                        \"orderable\": false,\n                        \"width\": '5%'\n                    },\n                ]\n            });\n    \t}, \n    \t'getHouseholdComments' : function() {\n    \t\tcommentsHelper.functions.showCommentsAjaxLoader(\n                $(css.activeHousehold.comments.view)\n            );\n\n            $.getJSON('/api/household/' + data.activeHousehold.id + '/comments', function( comments ) {\n\t\t\t\t\n\t\t\t\tcommentsHelper.functions.buildComments(\n                    commentsHelper.functions.getDataAttr('commentTemplate'),\n                    $(css.activeHousehold.comments.allComments),\n                    comments\n                );\n\t\t\t\tcommentsHelper.functions.hideCommentsAjaxLoader(\n                    $(css.activeHousehold.comments.view)\n                );\n\t\t\t});\n    \t},\n    \t'createComment' : function() {\n    \t\tconst form = $(css.activeHousehold.comments.form);\n    \t\tlet activeHousehold = functions.getDataAttr('activeHousehold');\n            let params = {\n                'url' : '/api/household/' + activeHousehold.id + '/comments/create',\n                'data' : {\n                    form: JSON.stringify(form.serializeArray().reduce(function(m,o){  m[o.name] = o.value; return m;}, {}))\n                },\n                'successCallback' : functions.commentCreateSuccess\n            };\n\n            commentsHelper.functions.createComment(params);\n    \t},\n        'commentCreateSuccess' : function(response) {\n            if(response.saved) {\n                $(css.activeHousehold.comments.nav.view).find('.nav-link').click();\n\n                commentsHelper.functions.showCommentsAjaxLoader(\n                    $(css.activeHousehold.comments.view)\n                );\n                \n                commentsHelper.functions.buildComments(\n                    commentsHelper.functions.getDataAttr('commentTemplate'),\n                    $(css.activeHousehold.comments.allComments),\n                    response.comments,\n                    'No comments yet.'\n                );\n\n                commentsHelper.functions.hideCommentsAjaxLoader(\n                    $(css.activeHousehold.comments.view)\n                );\n                \n                commentsHelper.functions.resetCommentForm($(css.activeHousehold.comments.form)[0]);\n            } else {\n                commentsHelper.functions.setCommentError(\n                    $(css.activeHousehold.comments.formError),\n                    'Could not save your comment. Refresh the page and try again.'\n                );\n            }\n        },\n    \t'updateTicker' : function() {\n            let unassignedHouseholds = _.clone(functions.getDataAttr('unassignedHouseholds'));\n\n            let shuffled = _.shuffle(_.shuffle(unassignedHouseholds));\n\n            $(css.ticker.container).html('');\n            $(css.ticker.container).append(data.tickerTemplate('Unassigned Households: '));\n\n            $.each(_.slice(shuffled,0,50), function(key, household) {\n                $(css.ticker.container).append(data.tickerTemplate(household.label));\n            });\n        }\n    };\n\n    $(document).on('click touch', '.assignHousehold', function() {\n    \tfunctions.workOnHousehold($(this).closest(css.household.container));\n    \t$([document.documentElement, document.body]).animate({\n\t        scrollTop: $(css.activeHousehold.container).offset().top\n\t    }, 1000);\n    });\n\n    $(document).on('click touch', '.removeVisiting', function() {\n    \tfunctions.removeActiveVisiting();\n    });\n\n    $(document).on('click touch', '.removeAssigned', function() {\n    \tfunctions.removeAssignedMinTo($(this).closest('.minToHouse'));\n    });\n\n    $(document).on('click touch', '#activeClose', function() {\n    \t$(css.activeHousehold.container).addClass('d-none');\n    });\n\n\t$(document).on('click touch', '#commentSubmit', function(e) {\n\t\te.preventDefault();\n\t\tfunctions.createComment();\n    });   \n\n    $(document).on('click touch', '#commentNavCreate', function() {\n    \tcommentsHelper.functions.setCommentError(\n            $(css.activeHousehold.comments.formError),\n            ''\n        );\n    });\n\n    $(document).on('click touch', '#tickerClose', function() {\n        $(css.ticker.mainContainer).remove();\n    });\n\n    $(document).on('show.bs.modal', '#assignmentFeedbackModal', function(e) {\n        let btn = $(e.relatedTarget);\n        let parent = btn.closest('.household');\n        let modal = $(this);\n        let householdData = functions.getHouseholdById(parent.data('householdid'));\n        let assignmentComments = [];\n\n        modal\n            .removeClass('approved rejected proposed')\n            .addClass(householdData.ministeredByStatus);\n\n\n        _.each(householdData.ministered_by_assignment, function(assignment){\n            _.each(assignment.comments, function(comment){\n                assignmentComments.push(comment);\n            });\n        });\n\n        $(\"#assignStatus\", modal).html(_.upperFirst(householdData.ministeredByStatus));\n        $(\".householdName\", modal).html(householdData.fullHouseholdName);\n        $(\".assignedNames\", modal).html(householdData.ministeringBrother + ' & ' + householdData.ministeringSister);\n\n        commentsHelper.functions.buildComments(\n            commentsHelper.functions.getDataAttr('commentTemplate'),\n            $(\"#aFeedbackContainer\", modal),\n            assignmentComments\n        );\n    });\n\n    return {\n        data : functions.getAllData,\n        functions: functions\n    }\n}();\n"],"names":["data","functions","commentsHelper","createUrl","$","ajaxSetup","headers","attr","val","params","ajax","url","type","success","response","successCallback","template","container","comments","emptyMessage","html","length","each","index","comment","author","authorInfo","newComment","id","body","name","_moment","updated_at","format","prepend","error","form","reset","find","removeClass","addClass","getAllData","window","ministeringHelper","css","commentTemplate","authorName","commentDate","tickerTemplate","content","households","setDataAttr","getUnassignedHouseholds","init","householdEl","householdData","getHouseholdById","ah","$ah","household","last_name","husband","husbandName","wife","wifeName","minTo","ministerTo","key","append","assignedReceive","children","remove","ministeringBrother","ministeringSister","getHouseholdComments","field","document","getElementById","ac","Autocomplete","getDataAttr","maximumItems","treshold","highlightTyped","onSelectItem","label","value","assignHousehold","filter","getJSON","setAutocomplete","updateTicker","assignedId","activeHousehold","householdId","updateHouseholds","assignedHousehold","householdName","resetDataTable","replaceHouseholdData","row","minSis","minBro","hData","householdKey","_","findIndex","otherHousehold","clickedEl","fn","dataTable","isDataTable","DataTable","destroy","paging","showCommentsAjaxLoader","view","buildComments","allComments","hideCommentsAjaxLoader","JSON","stringify","serializeArray","reduce","m","o","commentCreateSuccess","createComment","saved","nav","click","resetCommentForm","setCommentError","formError","unassignedHouseholds","clone","shuffled","shuffle","slice","on","workOnHousehold","this","closest","documentElement","animate","scrollTop","offset","top","removeActiveVisiting","removeAssignedMinTo","e","preventDefault","mainContainer","parent","relatedTarget","modal","assignmentComments","ministeredByStatus","ministered_by_assignment","assignment","push","upperFirst","fullHouseholdName"],"sourceRoot":""}